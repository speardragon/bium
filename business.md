# [기획서] Project Name: 비움 (bium)

## 1. 개요 (Overview)

- **목적:** '할 일' 중심이 아닌 '시간 구조' 중심의 스케줄링 도구 제공.
- **핵심 가치:** 사용자가 자신의 시간을 '컨테이너(그릇)'로 인식하고, 그 용량(Capacity) 안에서 할 일을 배치하도록 유도.
- **배포 형태:** Docker Container 기반의 로컬 웹 서비스 (Localhost).
- **데이터 저장:** 로컬 JSON 파일 또는 SQLite (서버 없이 가볍게 구동).

## 2. 핵심 UX 컨셉: "큐(Queue)의 시각화"

이 앱의 가장 중요한 부분입니다. 캘린더의 평범한 네모 상자가 아니라, **'무언가를 담을 수 있는 물리적 공간'**처럼 느껴져야 합니다.

### 2.1. 시각적 메타포: "용량(Capacity)이 있는 탱크"

- **큐(Queue)의 모습:**
  - 모든 시간 블록(Queue)은 **점선 테두리**의 빈 박스로 시작합니다 (마치 주차장 구획선처럼).
  - 큐의 상단에는 `이름(예: Deep Work)`과 `총 시간(예: 2h)`이 표시됩니다.
  - 큐 내부 배경에는 옅은 **'수위(Water Level)'** 게이지가 존재합니다.
- **할 일(Task)의 모습:**
  - 고체 블록(Solid Block)입니다.
  - 할 일에는 반드시 `예상 소요 시간`이 포함되어야 합니다.
- **상호작용 (The Filling):**
  - 할 일 블록을 드래그하여 큐 안에 떨어뜨리면(Drop), 큐 내부의 **수위(게이지)가 차오릅니다.**
  - **시각적 피드백:**
    - *여유:* 큐 용량의 70% 이하일 때 → 초록색/파란색 게이지 (안정감).
    - *적정:* 70~90% → 노란색/주황색 (주의).
    - *초과:* 100% 초과 시 → **빨간색으로 큐 테두리가 경고**하며, 넘친 만큼 블록이 큐 밖으로 삐져나오는 시각적 연출 (물리적 불가능함을 시각화).

## 3. 기능 명세 (Functional Requirements)

본질에 충실하기 위해 기능은 딱 2가지 화면으로 압축합니다.

### A. 설정 (Week Skeleton Setup) - "그릇 만들기"

- **기능:** 매주 반복되는 '시간의 뼈대'를 만드는 곳입니다. 특정 날짜가 아닌 '월요일', '화요일' 같은 요일 기준입니다.
- **액션:**
  - 시간표(Grid) 위에 드래그하여 큐 생성.
  - 큐 속성 설정: `이름` (Deep Work, Admin, Creative, Rest), `색상`, `시간대`.
  - **제약 사항:** 여기서는 구체적인 할 일을 적지 않습니다. 오직 '큐'만 만듭니다.

### B. 주간 계획 (Weekly Planning) - "그릇 채우기" (메인 화면)

모든 핵심 워크플로우가 이루어지는 **단일 통합 화면**입니다.

#### 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  Header: [설정] [주간 계획]          [◀ 이전 주] W49 [다음 주 ▶]  │
├─────────────────┬───────────────────────────────────────────┤
│ ◀ 사이드바      │                                           │
│ [Inbox|Queues]  │                                           │
│ ─────────────── │          캘린더 Time Grid                  │
│                 │    (Queue에 담긴 할 일이 자동 표시)         │
│ (리사이즈 가능)  │                                           │
│ (토글로 접기)    │                                           │
│                 │                                           │
└─────────────────┴───────────────────────────────────────────┘
```

#### 사이드바 (Collapsible & Resizable)
- **토글 버튼:** 사이드바를 완전히 접거나 펼 수 있음
- **리사이즈:** 사이드바 경계를 드래그하여 너비 조절 가능
- **탭 전환:** `Inbox` | `Queues` 두 가지 뷰

##### [Inbox 탭] - "재료 준비하기"
- **기능:** 머릿속에 떠오르는 할 일들을 쏟아내는 대기열
- **액션:**
  - `할 일 추가`: 텍스트 입력 + **예상 소요 시간(필수)**
  - 시간을 입력하지 않으면 기본값(예: 30분)이 부여됩니다
- **표시:** 할 일 목록 (아직 Queue에 배정되지 않은 것들)

##### [Queues 탭] - "큐 대시보드"
- **기능:** 정의된 모든 Queue를 카드 형태로 나열하고, 각 Queue에 담긴 할 일을 관리
- **표시 내용:**
  - Queue별 카드 (이름, 색상, 용량 게이지)
  - 각 Queue 내 할 일 목록 (사전순 정렬)
  - Queue의 남은 용량 표시 (예: "1h 30m / 2h")
- **액션:**
  - Inbox 탭의 할 일을 Queues 탭의 특정 Queue로 드래그 앤 드롭
  - Queue에서 할 일을 다시 Inbox로 드래그하여 배정 해제

#### 캘린더 Time Grid (우측 메인 영역)
- **기능:** Queue가 배치된 시간대에 해당 Queue에 담긴 할 일들이 **자동으로 표시**됨
- **핵심 동작:**
  - Queue에 할 일을 담으면 → 해당 Queue가 배치된 **모든 요일**에 동일하게 표시
  - 예: "Deep Work" Queue가 월/수/금 09:00-11:00에 있고, Task A를 담으면 → 월/수/금 해당 시간대에 모두 Task A가 나타남
- **용량 시각화:**
  - 큐에 할 일이 들어가는 순간, 해당 큐의 `남은 시간(Buffer)`이 실시간으로 계산되어 표시됨 (예: "2시간 중 30분 남음")
  - **Buffer Block:** 큐를 꽉 채우지 않고 남겨둔 공간은 '여유(Buffer)'라는 명시적인 시각적 패턴(빗금 등)으로 표현

#### 할 일 완료 처리
- **완료 방법:** 캘린더 또는 Queue 내에서 할 일 클릭 시 완료 토글
- **완료 시 시각적 표현:**
  - **Option 1 (색상 변경):** 완료된 할 일은 회색 톤 + 취소선으로 표시
  - **Option 2 (영역 분리):** Queue 카드 내에서 "완료됨" 섹션으로 이동 (접을 수 있음)
- **완료된 할 일의 용량 처리:** 완료된 할 일은 Queue 용량에서 **제외**되어, 수위 게이지가 내려감 (성취감 시각화)

## 4. 데이터 구조 (Data Structure)

복잡한 DB 대신 심플한 JSON 구조를 지향합니다.

```JSON
// queue_templates.json (큐 템플릿 정의 - 요일별 시간대)
[
  {
    "id": "qt_001",
    "queueId": "q_deepwork",      // 어떤 Queue 타입인지
    "dayOfWeek": 1,               // 월요일
    "startTime": "09:00",
    "endTime": "11:00"
  },
  {
    "id": "qt_002",
    "queueId": "q_deepwork",      // 같은 Queue가 다른 요일에도
    "dayOfWeek": 3,               // 수요일
    "startTime": "09:00",
    "endTime": "11:00"
  }
]

// queues.json (큐 타입 정의)
[
  {
    "id": "q_deepwork",
    "title": "Deep Work",
    "color": "#3B82F6",
    "tasks": ["t_001", "t_002"]   // 이 Queue에 담긴 할 일들 (사전순 정렬은 UI에서)
  },
  {
    "id": "q_admin",
    "title": "Admin",
    "color": "#10B981",
    "tasks": []
  }
]

// tasks.json (할 일 데이터)
[
  {
    "id": "t_001",
    "title": "서비스 기획서 작성",
    "durationMinutes": 60,
    "status": "inbox",            // 'inbox' | 'assigned' | 'completed'
    "assignedQueueId": null,      // assigned되면 queueId가 들어감
    "completedAt": null           // 완료 시 타임스탬프
  },
  {
    "id": "t_002",
    "title": "API 설계 검토",
    "durationMinutes": 45,
    "status": "assigned",
    "assignedQueueId": "q_deepwork",
    "completedAt": null
  },
  {
    "id": "t_003",
    "title": "회의록 정리",
    "durationMinutes": 30,
    "status": "completed",
    "assignedQueueId": "q_admin",
    "completedAt": "2025-12-08T14:30:00Z"
  }
]
```

### 데이터 흐름 설명

1. **Queue 타입(queues.json):** "Deep Work", "Admin" 같은 Queue의 정체성과 담긴 할 일 목록
2. **Queue 템플릿(queue_templates.json):** 각 Queue가 어느 요일, 어느 시간대에 배치되는지
3. **할 일(tasks.json):** 개별 Task와 상태 관리

**핵심:** Task를 Queue에 담으면 `assignedQueueId`만 설정되고, 해당 Queue가 배치된 모든 요일/시간대에 자동으로 표시됨

## 5. 테크 스택 & 개발 환경 (Tech Stack)

로컬 구동 및 Docker 배포에 최적화된 스택입니다.

- **Frontend:** React (Vite) + TypeScript
  - 이유: `react-beautiful-dnd` 또는 `dnd-kit` 라이브러리를 사용하여 드래그 앤 드롭 구현이 매우 용이함.
  - 상태 관리: Zustand (가볍고 빠름).
- **Backend:** Node.js (Express) 또는 Go (Gin) - *아주 얇은 API 레이어*
  - 역할: 로컬 파일 시스템(JSON)을 읽고 쓰는 기능만 수행.
- **Database:** `lowdb` (로컬 JSON 파일 DB)
  - 이유: 개인용 로컬 앱이므로 무거운 RDBMS(MySQL 등) 불필요. 파일 하나로 데이터 백업 가능.
- **Container:** Docker & Docker Compose
  - Frontend와 Backend를 하나의 `docker-compose.yml`로 묶어서 `docker-compose up` 명령 한 번으로 실행.

## 6. 사소하지만 중요한 디테일 (Micro Interactions)

1. **스냅(Snap) 효과:** 할 일을 드래그해서 큐 근처에 가져가면, 자석처럼 착! 달라붙는 느낌을 주어 '담긴다'는 느낌을 강화합니다.
2. **초과 경고음:** 큐의 용량을 초과하는 태스크를 억지로 넣으려 하면, 붉은색 점멸과 함께 미세한 진동(모바일) 또는 효과음을 줍니다. (심리적 저항감 형성)
3. **리셋 버튼:** "이번 주는 망했어"라는 생각이 들 때, 큐 안의 내용을 모두 Inbox로 쏟아버리고 다시 시작할 수 있는 `Empty All Queues` 버튼 제공 (심리적 부담 완화).
4. **사이드바 인터랙션:**
   - **토글 버튼:** 사이드바 상단의 `◀` 버튼으로 완전히 접기/펼치기 (아이콘만 남은 미니 모드 지원)
   - **리사이즈:** 사이드바 우측 경계를 드래그하여 너비 조절 (min: 200px, max: 500px)
   - **상태 유지:** 사이드바 너비와 접힘 상태는 localStorage에 저장되어 새로고침 후에도 유지
5. **완료 애니메이션:** 할 일을 완료 처리하면 체크 아이콘과 함께 부드럽게 회색으로 페이드되며, 수위 게이지가 내려가는 애니메이션 (성취감 강화).
